{
  BufferedReader reader=null;
  String currentLine=null;
  int lineCount=0;
  try {
    reader=new BufferedReader(new InputStreamReader(inputStream));
    while ((currentLine=reader.readLine()) != null) {
      lineCount++;
      currentLine=currentLine.replaceAll("\\s+"," ").trim();
      if (currentLine.startsWith("#") || currentLine.length() == 0) {
        continue;
      }
 else       if (currentLine.startsWith("v ")) {
        Vertex vertex=parseVertex(currentLine,lineCount);
        if (vertex != null) {
          vertices.add(vertex);
        }
      }
 else       if (currentLine.startsWith("vn ")) {
        Vertex vertex=parseVertexNormal(currentLine,lineCount);
        if (vertex != null) {
          vertexNormals.add(vertex);
        }
      }
 else       if (currentLine.startsWith("vt ")) {
        TextureCoordinate textureCoordinate=parseTextureCoordinate(currentLine,lineCount);
        if (textureCoordinate != null) {
          textureCoordinates.add(textureCoordinate);
        }
      }
 else       if (currentLine.startsWith("f ")) {
        if (currentGroupObject == null) {
          currentGroupObject=new GroupObject("Default");
        }
        Face face=parseFace(currentLine,lineCount);
        if (face != null) {
          currentGroupObject.faces.add(face);
        }
      }
 else       if (currentLine.startsWith("g ") | currentLine.startsWith("o ")) {
        GroupObject group=parseGroupObject(currentLine,lineCount);
        if (group != null) {
          if (currentGroupObject != null) {
            groupObjects.add(currentGroupObject);
          }
        }
        currentGroupObject=group;
      }
    }
    groupObjects.add(currentGroupObject);
  }
 catch (  IOException e) {
    throw new ModelFormatException("IO Exception reading model format",e);
  }
 finally {
    try {
      reader.close();
    }
 catch (    IOException e) {
    }
    try {
      inputStream.close();
    }
 catch (    IOException e) {
    }
  }
}
