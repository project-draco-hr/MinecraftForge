{
  LoaderState oldState=state;
  state=state.transition(!errors.isEmpty());
  if (state != desiredState) {
    FMLLog.severe("Fatal errors were detected during the transition from %s to %s. Loading cannot continue",oldState,desiredState);
    StringBuilder sb=new StringBuilder();
    printModStates(sb);
    FMLLog.severe(sb.toString());
    FMLLog.severe("The following problems were captured during this phase");
    for (    Entry<String,Throwable> error : errors.entries()) {
      FMLLog.log(Level.SEVERE,error.getValue(),"Caught exception from %s",error.getKey());
    }
    throw new LoaderException(errors.values().iterator().next());
  }
}
