{
  try {
    byte[] buf=loadBuffer.get();
    if (buf == null) {
      loadBuffer.set(new byte[1 << 12]);
      buf=loadBuffer.get();
    }
    int r, totalLength=0;
    while ((r=stream.read(buf,totalLength,buf.length - totalLength)) != -1) {
      totalLength+=r;
      if (totalLength >= buf.length - 1) {
        byte[] oldbuf=buf;
        buf=new byte[oldbuf.length + (1 << 12)];
        System.arraycopy(oldbuf,0,buf,0,oldbuf.length);
      }
    }
    byte[] result=new byte[totalLength];
    System.arraycopy(buf,0,result,0,totalLength);
    return result;
  }
 catch (  Throwable t) {
    FMLRelaunchLog.log(Level.WARNING,t,"Problem loading class");
    return new byte[0];
  }
}
