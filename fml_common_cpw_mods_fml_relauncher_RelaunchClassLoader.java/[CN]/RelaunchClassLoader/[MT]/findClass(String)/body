{
  if (invalidClasses.contains(name)) {
    throw new ClassNotFoundException(name);
  }
  for (  String st : classLoaderExceptions) {
    if (name.startsWith(st)) {
      return parent.loadClass(name);
    }
  }
  if (cachedClasses.containsKey(name)) {
    return cachedClasses.get(name);
  }
  for (  String st : transformerExceptions) {
    if (name.startsWith(st)) {
      try {
        Class<?> cl=super.findClass(name);
        cachedClasses.put(name,cl);
        return cl;
      }
 catch (      ClassNotFoundException e) {
        invalidClasses.add(name);
        throw e;
      }
    }
  }
  try {
    int lastDot=name.lastIndexOf('.');
    if (lastDot > -1) {
      String pkgname=name.substring(0,lastDot);
      if (getPackage(pkgname) == null) {
        definePackage(pkgname,null,null,null,null,null,null,null);
      }
    }
    byte[] basicClass=getClassBytes(name);
    byte[] transformedClass=runTransformers(name,basicClass);
    Class<?> cl=defineClass(name,transformedClass,0,transformedClass.length);
    cachedClasses.put(name,cl);
    return cl;
  }
 catch (  Throwable e) {
    invalidClasses.add(name);
    throw new ClassNotFoundException(name,e);
  }
}
