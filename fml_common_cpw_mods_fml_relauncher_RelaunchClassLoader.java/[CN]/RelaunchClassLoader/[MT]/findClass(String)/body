{
  if (excludedPackages.length != 0) {
    classLoaderExceptions.addAll(Arrays.asList(excludedPackages));
    excludedPackages=new String[0];
  }
  if (transformerExclusions.length != 0) {
    transformerExceptions.addAll(Arrays.asList(transformerExclusions));
    transformerExclusions=new String[0];
  }
  for (  String st : classLoaderExceptions) {
    if (name.startsWith(st)) {
      return parent.loadClass(name);
    }
  }
  if (cachedClasses.containsKey(name)) {
    return cachedClasses.get(name);
  }
  for (  String st : transformerExceptions) {
    if (name.startsWith(st)) {
      Class<?> cl=super.findClass(name);
      cachedClasses.put(name,cl);
      return cl;
    }
  }
  try {
    int lastDot=name.lastIndexOf('.');
    if (lastDot > -1) {
      String pkgname=name.substring(0,lastDot);
      if (getPackage(pkgname) == null) {
        definePackage(pkgname,null,null,null,null,null,null,null);
      }
    }
    byte[] basicClass=getClassBytes(name);
    byte[] transformedClass=runTransformers(name,basicClass);
    Class<?> cl=defineClass(name,transformedClass,0,transformedClass.length);
    cachedClasses.put(name,cl);
    return cl;
  }
 catch (  Throwable e) {
    throw new ClassNotFoundException(name,e);
  }
}
