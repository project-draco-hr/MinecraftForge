{
  if (!event.world.isRemote) {
    if (event.entity.getPersistentID() == null) {
      event.entity.generatePersistentID();
    }
 else {
      ForgeChunkManager.loadEntity(event.entity);
    }
  }
  Entity entity=event.entity;
  if (entity.getClass().equals(EntityItem.class)) {
    ItemStack item=((EntityItem)entity).item;
    if (item != null && item.getItem().hasCustomEntity(item)) {
      Entity newEntity=item.getItem().createEntity(event.world,entity,item);
      if (newEntity != null) {
        entity.setDead();
        event.setCanceled(true);
        event.world.spawnEntityInWorld(newEntity);
      }
    }
  }
}
