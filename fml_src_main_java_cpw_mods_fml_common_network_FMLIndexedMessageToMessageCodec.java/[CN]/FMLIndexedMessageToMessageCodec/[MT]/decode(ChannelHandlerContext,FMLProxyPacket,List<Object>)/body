{
  ByteBuf payload=msg.payload();
  byte discriminator=payload.readByte();
  Class<? extends A> clazz=discriminators.get(discriminator);
  A newMsg=clazz.newInstance();
  decodeInto(ctx,payload.slice(),newMsg);
  out.add(newMsg);
}
