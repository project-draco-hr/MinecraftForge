{
  try {
    URL libDownload=new URL(String.format(rootUrl,libFile.getName()));
    String infoString=String.format("Downloading file %s",libDownload.toString());
    downloadMonitor.updateProgressString(infoString);
    FMLRelaunchLog.info(infoString);
    URLConnection connection=libDownload.openConnection();
    connection.setRequestProperty("User-Agent","FML Relaunch Downloader");
    int sizeGuess=connection.getContentLength();
    performDownload(connection.getInputStream(),sizeGuess,hash,libFile);
    downloadMonitor.updateProgressString("Download complete");
    FMLRelaunchLog.info("Download complete");
  }
 catch (  Exception e) {
    if (downloadMonitor.stopIt) {
      FMLRelaunchLog.warning("You have stopped downloads in progress");
      return;
    }
    if (e instanceof RuntimeException)     throw (RuntimeException)e;
    FMLRelaunchLog.severe("There was a problem downloading the file %s automatically. Perhaps you " + "have an environment without internet access. You will need to download " + "the file manually\n",libFile.getName());
    libFile.delete();
    throw new RuntimeException("A download error occured",e);
  }
}
