{
  if (mod.getSourceType() == SourceType.JAR) {
    try {
      ZipFile jar=new ZipFile(mod.getSource());
      ZipEntry infoFile=jar.getEntry("mcmod.info");
      if (infoFile != null) {
        InputStream input=jar.getInputStream(infoFile);
        ModMetadata data=sidedDelegate.readMetadataFrom(input,mod);
        mod.setMetadata(data);
      }
 else {
        getFMLLogger().fine(String.format("Failed to find mcmod.info file in %s for %s",mod.getSource().getName(),mod.getName()));
      }
    }
 catch (    Exception e) {
      getFMLLogger().fine(String.format("Failed to find mcmod.info file in %s for %s",mod.getSource().getName(),mod.getName()));
      getFMLLogger().throwing("FMLCommonHandler","loadMetadataFor",e);
    }
  }
 else {
    try {
      InputStream input=Loader.instance().getModClassLoader().getResourceAsStream(mod.getName() + ".info");
      if (input == null) {
        input=Loader.instance().getModClassLoader().getResourceAsStream("net/minecraft/src/" + mod.getName() + ".info");
      }
      if (input != null) {
        ModMetadata data=sidedDelegate.readMetadataFrom(input,mod);
        mod.setMetadata(data);
      }
    }
 catch (    Exception e) {
      getFMLLogger().fine(String.format("Failed to find %s.info file in %s for %s",mod.getName(),mod.getSource().getName(),mod.getName()));
      getFMLLogger().throwing("FMLCommonHandler","loadMetadataFor",e);
    }
  }
}
