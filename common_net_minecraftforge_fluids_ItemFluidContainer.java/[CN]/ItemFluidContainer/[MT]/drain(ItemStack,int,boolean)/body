{
  if (container.stackTagCompound == null || !container.stackTagCompound.hasKey("Fluid")) {
    return null;
  }
  FluidStack stack=FluidStack.loadFluidStackFromNBT(container.stackTagCompound.getCompoundTag("Fluid"));
  if (stack == null) {
    return null;
  }
  stack.amount=Math.min(stack.amount,maxDrain);
  if (doDrain) {
    if (maxDrain >= capacity) {
      container.stackTagCompound.removeTag("Fluid");
      if (container.stackTagCompound.hasNoTags()) {
        container.stackTagCompound=null;
      }
      return stack;
    }
    NBTTagCompound fluidTag=container.stackTagCompound.getCompoundTag("Fluid");
    fluidTag.setInteger("Amount",fluidTag.getInteger("Amount") - maxDrain);
    container.stackTagCompound.setTag("Fluid",fluidTag);
  }
  return stack;
}
