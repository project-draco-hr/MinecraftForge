{
  String test=new String("test");
  ByteBuf buf=Unpooled.buffer(20,20);
  ByteBufUtils.writeUTF8String(buf,test);
  assertArrayEquals("String bytes",new byte[]{4,116,101,115,116,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},buf.array());
  String repeat=Strings.repeat("test",100);
  buf=Unpooled.buffer(420,420);
  ByteBufUtils.writeUTF8String(buf,repeat);
  assertArrayEquals("String repeat bytes",new byte[]{-112,3,116,101,115,116,116,101,115,116,116,101,115,116,116,101,115,116,116,101,115,116,116,101,115,116,116,101,115,116,116,101,115,116,116,101,115,116,116,101,115,116,116,101,115,116,116,101,115,116,116,101,115,116,116,101,115,116,116,101,115,116,116,101,115,116,116,101,115,116,116,101,115,116,116,101,115,116,116,101,115,116,116,101,115,116,116,101,115,116,116,101,115,116,116,101,115,116,116,101,115,116,116,101,115,116,116,101,115,116,116,101,115,116,116,101,115,116,116,101,115,116,116,101,115,116,116,101,115,116,116,101,115,116,116,101,115,116,116,101,115,116,116,101,115,116,116,101,115,116,116,101,115,116,116,101,115,116,116,101,115,116,116,101,115,116,116,101,115,116,116,101,115,116,116,101,115,116,116,101,115,116,116,101,115,116,116,101,115,116,116,101,115,116,116,101,115,116,116,101,115,116,116,101,115,116,116,101,115,116,116,101,115,116,116,101,115,116,116,101,115,116,116,101,115,116,116,101,115,116,116,101,115,116,116,101,115,116,116,101,115,116,116,101,115,116,116,101,115,116,116,101,115,116,116,101,115,116,116,101,115,116,116,101,115,116,116,101,115,116,116,101,115,116,116,101,115,116,116,101,115,116,116,101,115,116,116,101,115,116,116,101,115,116,116,101,115,116,116,101,115,116,116,101,115,116,116,101,115,116,116,101,115,116,116,101,115,116,116,101,115,116,116,101,115,116,116,101,115,116,116,101,115,116,116,101,115,116,116,101,115,116,116,101,115,116,116,101,115,116,116,101,115,116,116,101,115,116,116,101,115,116,116,101,115,116,116,101,115,116,116,101,115,116,116,101,115,116,116,101,115,116,116,101,115,116,116,101,115,116,116,101,115,116,116,101,115,116,116,101,115,116,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},buf.array());
}
