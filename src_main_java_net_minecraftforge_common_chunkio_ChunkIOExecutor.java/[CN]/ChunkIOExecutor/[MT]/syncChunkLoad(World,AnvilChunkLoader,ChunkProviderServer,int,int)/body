{
  QueuedChunk key=new QueuedChunk(x,z,loader,world,provider);
  ChunkIOProvider task=tasks.get(key);
  if (task != null) {
    if (!pool.remove(task)) {
synchronized (task) {
        while (!task.runFinished()) {
          try {
            task.wait();
          }
 catch (          InterruptedException e) {
            e.printStackTrace();
          }
        }
      }
    }
  }
 else {
    task=new ChunkIOProvider(key);
    task.run();
  }
  task.syncCallback();
  return task.getChunk();
}
