{
  ScoreObjective scoreobjective=this.mc.theWorld.getScoreboard().func_96539_a(0);
  NetClientHandler handler=mc.thePlayer.sendQueue;
  if (mc.gameSettings.keyBindPlayerList.pressed && (!mc.isIntegratedServerRunning() || handler.playerInfoList.size() > 1 || scoreobjective != null)) {
    this.mc.mcProfiler.startSection("playerList");
    List players=handler.playerInfoList;
    int maxPlayers=handler.currentServerMaxPlayers;
    int rows=maxPlayers;
    int columns=1;
    for (columns=1; rows > 20; rows=(maxPlayers + columns - 1) / columns) {
      columns++;
    }
    int columnWidth=300 / columns;
    if (columnWidth > 150) {
      columnWidth=150;
    }
    int left=(width - columns * columnWidth) / 2;
    byte border=10;
    drawRect(left - 1,border - 1,left + columnWidth * columns,border + 9 * rows,Integer.MIN_VALUE);
    for (int i=0; i < maxPlayers; i++) {
      int xPos=left + i % columns * columnWidth;
      int yPos=border + i / columns * 9;
      drawRect(xPos,yPos,xPos + columnWidth - 1,yPos + 8,553648127);
      GL11.glColor4f(1.0F,1.0F,1.0F,1.0F);
      GL11.glEnable(GL11.GL_ALPHA_TEST);
      if (i < players.size()) {
        GuiPlayerInfo player=(GuiPlayerInfo)players.get(i);
        ScorePlayerTeam team=mc.theWorld.getScoreboard().getPlayersTeam(player.name);
        String displayName=ScorePlayerTeam.formatPlayerName(team,player.name);
        fontrenderer.drawStringWithShadow(displayName,xPos,yPos,16777215);
        if (scoreobjective != null) {
          int endX=xPos + fontrenderer.getStringWidth(displayName) + 5;
          int maxX=xPos + columnWidth - 12 - 5;
          if (maxX - endX > 5) {
            Score score=scoreobjective.getScoreboard().func_96529_a(player.name,scoreobjective);
            String scoreDisplay=EnumChatFormatting.YELLOW + "" + score.getScorePoints();
            fontrenderer.drawStringWithShadow(scoreDisplay,maxX - fontrenderer.getStringWidth(scoreDisplay),yPos,16777215);
          }
        }
        GL11.glColor4f(1.0F,1.0F,1.0F,1.0F);
        mc.func_110434_K().func_110577_a(Gui.field_110324_m);
        int pingIndex=4;
        int ping=player.responseTime;
        if (ping < 0)         pingIndex=5;
 else         if (ping < 150)         pingIndex=0;
 else         if (ping < 300)         pingIndex=1;
 else         if (ping < 600)         pingIndex=2;
 else         if (ping < 1000)         pingIndex=3;
        zLevel+=100.0F;
        drawTexturedModalRect(xPos + columnWidth - 12,yPos,0,176 + pingIndex * 8,10,8);
        zLevel-=100.0F;
      }
    }
  }
}
