{
  boolean preCancelEvent=false;
  if (gameType.isAdventure() && !entityPlayer.isCurrentToolAdventureModeExempt(x,y,z)) {
    preCancelEvent=true;
  }
 else   if (gameType.isCreative() && entityPlayer.getHeldItem() != null && entityPlayer.getHeldItem().getItem() instanceof ItemSword) {
    preCancelEvent=true;
  }
  if (world.getTileEntity(x,y,z) == null) {
    S23PacketBlockChange packet=new S23PacketBlockChange(x,y,z,world);
    packet.field_148883_d=Blocks.air;
    packet.field_148884_e=0;
    entityPlayer.playerNetServerHandler.sendPacket(packet);
  }
  Block block=world.getBlock(x,y,z);
  int blockMetadata=world.getBlockMetadata(x,y,z);
  BlockEvent.BreakEvent event=new BlockEvent.BreakEvent(x,y,z,world,block,blockMetadata,entityPlayer);
  event.setCanceled(preCancelEvent);
  MinecraftForge.EVENT_BUS.post(event);
  if (event.isCanceled()) {
    entityPlayer.playerNetServerHandler.sendPacket(new S23PacketBlockChange(x,y,z,world));
    TileEntity tileentity=world.getTileEntity(x,y,z);
    if (tileentity != null) {
      Packet pkt=tileentity.getDescriptionPacket();
      if (pkt != null) {
        entityPlayer.playerNetServerHandler.sendPacket(pkt);
      }
    }
  }
  return event;
}
