{
  Logger log=FMLCommonHandler.instance().getFMLLogger();
  ITextureFX ifx=(effect instanceof ITextureFX ? ((ITextureFX)effect) : null);
  if (ifx != null && ifx.getErrored()) {
    return false;
  }
  String name=effect.getClass().getSimpleName();
  Profiler.func_40663_a(name);
  try {
    effect.func_783_a();
  }
 catch (  Exception e) {
    log.warning(String.format("Texture FX %s has failed to animate. Likely caused by a texture pack change that they did not respond correctly to",name));
    if (ifx != null) {
      ifx.setErrored(true);
    }
    Profiler.func_40662_b();
    return false;
  }
  Profiler.func_40662_b();
  Dimension dim=getTextureDimensions(effect);
  int target=((dim.width >> 4) * (dim.height >> 4)) << 2;
  if (effect.field_1127_a.length != target) {
    log.warning(String.format("Detected a texture FX sizing discrepancy in %s (%d, %d)",name,effect.field_1127_a.length,target));
    if (ifx != null) {
      ifx.setErrored(true);
    }
    return false;
  }
  return true;
}
