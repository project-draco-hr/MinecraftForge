{
  FMLLog.info("Swap : %s %d %s",name,id,thing);
  BitSet temporary=availabilityMap;
  availabilityMap=transactionalAvailabilityMap;
  int idToUse=id;
  if (id == 0 || availabilityMap.get(id)) {
    idToUse=availabilityMap.nextClearBit(minId);
  }
  if (idToUse >= maxId) {
    throw new RuntimeException(String.format("Invalid id %s - not accepted",id));
  }
  namedIds.forcePut(func_148755_c(name),idToUse);
  reassignMapping(name,idToUse);
  useSlot(idToUse);
  availabilityMap=temporary;
  FMLLog.info("Swap : %s %d %s",name,idToUse,thing);
  return idToUse;
}
