{
  log.fine("Verifying mod dependencies are satisfied");
  for (  ModContainer mod : mods) {
    if (!namedMods.keySet().containsAll(mod.getDependencies())) {
      log.severe(String.format("The mod %s requires mods %s to be available, one or more are not",mod.getName(),mod.getDependencies()));
      LoaderException le=new LoaderException();
      log.throwing("Loader","sortModList",le);
      throw new LoaderException();
    }
  }
  log.fine("All dependencies are satisfied");
  ModSorter sorter=new ModSorter(mods,namedMods);
  try {
    log.fine("Sorting mods into an ordered list");
    mods=sorter.sort();
    log.fine(String.format("Sorted mod list %s",mods));
  }
 catch (  IllegalArgumentException iae) {
    log.severe("A dependency cycle was detected in the input mod set so they cannot be loaded in order");
    log.throwing("Loader","sortModList",iae);
    throw new LoaderException(iae);
  }
}
