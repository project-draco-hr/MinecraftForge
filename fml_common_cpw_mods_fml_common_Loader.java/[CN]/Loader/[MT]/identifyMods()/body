{
  FMLLog.fine("Building injected Mod Containers %s",injectedContainers);
  mods.add(new InjectedModContainer(mcp,new File("minecraft.jar")));
  File coremod=new File(minecraftDir,"coremods");
  for (  String cont : injectedContainers) {
    ModContainer mc;
    try {
      mc=(ModContainer)Class.forName(cont,true,modClassLoader).newInstance();
    }
 catch (    Exception e) {
      FMLLog.log(Level.SEVERE,e,"A problem occured instantiating the injected mod container %s",cont);
      throw new LoaderException(e);
    }
    mods.add(new InjectedModContainer(mc,coremod));
  }
  ModDiscoverer discoverer=new ModDiscoverer();
  FMLLog.fine("Attempting to load mods contained in the minecraft jar file and associated classes");
  discoverer.findClasspathMods(modClassLoader);
  FMLLog.fine("Minecraft jar mods loaded successfully");
  FMLLog.info("Searching %s for mods",canonicalModsDir.getAbsolutePath());
  discoverer.findModDirMods(canonicalModsDir);
  mods.addAll(discoverer.identifyMods());
  identifyDuplicates(mods);
  namedMods=Maps.uniqueIndex(mods,new ModIdFunction());
  FMLLog.info("Forge Mod Loader has identified %d mod%s to load",mods.size(),mods.size() != 1 ? "s" : "");
  return discoverer;
}
