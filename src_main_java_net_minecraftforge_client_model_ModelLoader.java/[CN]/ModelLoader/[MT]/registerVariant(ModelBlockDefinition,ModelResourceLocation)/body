{
  if (!loadingBlockModels.isEmpty() && loadingBlockModels.peekFirst() == location) {
    blockBar.step(location.toString());
    loadingBlockModels.removeFirst();
  }
  Variants variants=null;
  try {
    variants=definition.getVariants(location.getVariant());
  }
 catch (  MissingVariantException e) {
    missingVariants.add(location);
  }
  if (variants != null && !variants.getVariants().isEmpty()) {
    try {
      stateModels.put(location,new WeightedRandomModel(location,variants));
    }
 catch (    Throwable e) {
      throw new RuntimeException(e);
    }
  }
}
