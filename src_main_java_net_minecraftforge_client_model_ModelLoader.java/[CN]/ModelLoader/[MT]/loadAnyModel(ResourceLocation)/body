{
  if (loadingModels.contains(location)) {
    throw new IllegalStateException("circular model dependencies involving model " + location);
  }
  loadingModels.add(location);
  try {
    IModel model=ModelLoaderRegistry.getModel(location);
    for (    ResourceLocation dep : model.getDependencies()) {
      if (dep instanceof ModelResourceLocation) {
        loadVariants(ImmutableList.of((ModelResourceLocation)dep));
      }
 else {
        getModel(dep);
      }
    }
    textures.addAll(model.getTextures());
  }
  finally {
    loadingModels.remove(location);
  }
}
