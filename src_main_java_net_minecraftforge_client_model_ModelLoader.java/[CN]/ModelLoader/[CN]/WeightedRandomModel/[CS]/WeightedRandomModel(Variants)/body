{
  this.variants=variants.getVariants();
  ImmutableMap.Builder<IModelPart,TRSRTransformation> builder=ImmutableMap.builder();
  for (  Variant v : (List<Variant>)variants.getVariants()) {
    ResourceLocation loc=v.getModelLocation();
    resolveTextures.add(ModelLoaderRegistry.getActualLocation(loc));
    locations.add(loc);
    IModel model=new WeightedPartWrapper(getModel(loc));
    models.add(model);
    builder.put(model,new TRSRTransformation(v.getRotation()));
    if (v.isUvLocked())     uvLocked.add(ModelLoaderRegistry.getActualLocation(loc));
  }
  defaultState=new MapModelState(builder.build());
}
