{
  if (!args.containsKey("--username") || !args.containsKey("--password"))   return;
  String username=args.get("--username");
  String password=args.remove("--password");
  Gson GSON=new GsonBuilder().setPrettyPrinting().create();
  String request=GSON.toJson(new Request(username,password));
  OutputStream out=null;
  InputStream in=null;
  try {
    HttpURLConnection con=(HttpURLConnection)(new URL("https://authserver.mojang.com/authenticate")).openConnection();
    con.setConnectTimeout(15000);
    con.setReadTimeout(15000);
    con.setUseCaches(false);
    byte[] data=request.getBytes(Charsets.UTF_8);
    con.setRequestProperty("Content-Type","application/json; charset=utf-8");
    con.setRequestProperty("Content-Length",Integer.toString(data.length));
    con.setDoOutput(true);
    out=con.getOutputStream();
    out.write(data);
    in=con.getInputStream();
    Response result=GSON.fromJson(IOUtils.toString(in,Charsets.UTF_8),Response.class);
    if (result.selectedProfile != null) {
      args.put("--username",result.selectedProfile.name);
      args.put("--uuid",result.selectedProfile.id);
      args.put("--accessToken",result.accessToken);
    }
  }
 catch (  MalformedURLException e) {
    e.printStackTrace();
  }
catch (  IOException e) {
    e.printStackTrace();
  }
 finally {
    close(out);
    close(in);
  }
}
