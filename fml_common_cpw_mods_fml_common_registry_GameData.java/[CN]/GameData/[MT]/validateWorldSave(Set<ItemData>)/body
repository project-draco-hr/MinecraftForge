{
  isSaveValid=true;
  shouldContinue=true;
  if (worldSaveItems == null) {
    serverValidationLatch.countDown();
    try {
      clientValidationLatch.await();
    }
 catch (    InterruptedException e) {
    }
    return;
  }
  Function<? super ItemData,Integer> idMapFunction=new Function<ItemData,Integer>(){
    public Integer apply(    ItemData input){
      return input.getItemId();
    }
  }
;
  Map<Integer,ItemData> worldMap=Maps.uniqueIndex(worldSaveItems,idMapFunction);
  difference=Maps.difference(worldMap,idMap);
  FMLLog.fine("The difference set is %s",difference);
  if (!difference.entriesDiffering().isEmpty() || !difference.entriesOnlyOnLeft().isEmpty()) {
    FMLLog.severe("FML has detected item discrepancies");
    FMLLog.severe("Missing items : %s",difference.entriesOnlyOnLeft());
    FMLLog.severe("Mismatched items : %s",difference.entriesDiffering());
    isSaveValid=false;
    serverValidationLatch.countDown();
  }
 else {
    isSaveValid=true;
    serverValidationLatch.countDown();
  }
  try {
    clientValidationLatch.await();
    if (!shouldContinue) {
      throw new RuntimeException("This server instance is going to stop abnormally because of a fatal ID mismatch");
    }
  }
 catch (  InterruptedException e) {
  }
}
