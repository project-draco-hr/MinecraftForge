def reobfuscate(conffile, reobf_all, keep_lvt, keep_generics, only_client, only_server, srg_names):
    try:
        commands = Commands(conffile, verify=True)
        if keep_generics:
            keep_lvt = True
        process_client = True
        process_server = True
        if (only_client and (not only_server)):
            process_server = False
        if (only_server and (not only_client)):
            process_client = False
        if srg_names:
            commands.logger.info('> Creating Retroguard maping files')
            commands.createreobfsrg()
        commands.logger.info('> Creating Retroguard config files')
        commands.creatergcfg(reobf=True, keep_lvt=keep_lvt, keep_generics=keep_generics, srg_names=srg_names)
        if process_client:
            reobfuscate_side(commands, CLIENT, reobf_all=reobf_all, srg_names=srg_names, force_rg=True)
        if process_server:
            reobfuscate_side(commands, SERVER, reobf_all=reobf_all, srg_names=srg_names, force_rg=True)
    except Exception:
        logging.exception('FATAL ERROR')
        sys.exit(1)
