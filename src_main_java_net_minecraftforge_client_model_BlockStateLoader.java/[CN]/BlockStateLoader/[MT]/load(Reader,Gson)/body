{
  try {
    byte[] data=IOUtils.toByteArray(reader);
    reader=new InputStreamReader(new ByteArrayInputStream(data),Charsets.UTF_8);
    Marker marker=GSON.fromJson(new String(data),Marker.class);
switch (marker.forge_marker) {
case 1:
      ForgeBlockStateV1 v1=GSON.fromJson(reader,ForgeBlockStateV1.class);
    List<ModelBlockDefinition.Variants> variants=Lists.newArrayList();
  for (  Entry<String,Collection<ForgeBlockStateV1.Variant>> entry : v1.variants.asMap().entrySet()) {
    List<ModelBlockDefinition.Variant> mcVars=Lists.newArrayList();
    for (    ForgeBlockStateV1.Variant var : entry.getValue()) {
      ModelRotation rot=var.getRotation().or(ModelRotation.X0_Y0);
      boolean uvLock=var.getUvLock().or(false);
      int weight=var.getWeight().or(1);
      if (var.getModel() != null && var.getSubmodels().size() == 0 && var.getTextures().size() == 0 && var.getCustomData().size() == 0)       mcVars.add(new ModelBlockDefinition.Variant(var.getModel(),rot,uvLock,weight));
 else       mcVars.add(new ForgeVariant(var.getModel(),rot,uvLock,weight,var.getTextures(),var.getOnlyPartsVariant(),var.getCustomData()));
    }
    variants.add(new ModelBlockDefinition.Variants(entry.getKey(),mcVars));
  }
return new ModelBlockDefinition((Collection)variants);
default :
return vanillaGSON.fromJson(reader,ModelBlockDefinition.class);
}
}
 catch (IOException e) {
Throwables.propagate(e);
}
return null;
}
