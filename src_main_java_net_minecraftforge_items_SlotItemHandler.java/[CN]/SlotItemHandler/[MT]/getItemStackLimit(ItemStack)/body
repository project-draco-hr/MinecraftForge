{
  ItemStack maxAdd=stack.copy();
  maxAdd.stackSize=maxAdd.getMaxStackSize();
  ItemStack currentStack=this.getItemHandler().getStackInSlot(index);
  ItemStack remainder=this.getItemHandler().insertItem(index,maxAdd,true);
  int current=currentStack == null ? 0 : currentStack.stackSize;
  int added=maxAdd.stackSize - (remainder != null ? remainder.stackSize : 0);
  return current + added;
}
