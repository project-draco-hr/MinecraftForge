def _mkdir(newdir):
    'works the way a good mkdir should :)\n        - already exists, silently complete\n        - regular file in the way, raise an exception\n        - parent directory(ies) does not exist, make them as well\n    '
    if os.path.isdir(newdir):
        pass
    elif os.path.isfile(newdir):
        raise OSError(("a file with the same name as the desired dir, '%s', already exists." % newdir))
    else:
        (head, tail) = os.path.split(newdir)
        if (head and (not os.path.isdir(head))):
            _mkdir(head)
        if tail:
            os.mkdir(newdir)
