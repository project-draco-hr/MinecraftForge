def download_file(url, target, md5=None):
    name = os.path.basename(target)
    if (os.path.isfile(target) and (not (md5 == None))):
        if (not (get_md5(target) == md5)):
            print ('Modified %s detected, removing' % name)
            os.remove(target)
    if (not os.path.isfile(target)):
        try:
            urllib.urlretrieve(url, target)
            if (not (md5 == None)):
                if (not (get_md5(target) == md5)):
                    print ('Download of %s failed md5 check, deleting' % name)
                    os.remove(target)
                    return False
            print ('Downloaded %s' % name)
        except Exception as e:
            print e
            print ("Download of %s failed, download it manually from '%s' to '%s'" % (target, url, target))
            return False
    else:
        print ('File Exists: %s' % os.path.basename(target))
    return True
