def inject_version(src_file, build=0):
    version = load_version(build)
    tmp_file = (src_file + '.tmp')
    with open(src_file, 'r') as fh:
        buf = fh.read()

    def mapname(match):
        try:
            return ('%s%s;' % (match.group(1), version[match.group(2)]))
        except KeyError:
            pass
        return match.group(0)
    buf = version_reg.sub(mapname, buf)
    with open(tmp_file, 'w') as fh:
        fh.write(buf)
    shutil.move(tmp_file, src_file)
